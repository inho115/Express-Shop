# Express Shop
Link to website <a href=["https://express-shop.up.railway.app/"](https://express-shop-production.up.railway.app/)>Express Shop</a><br/>
By In ho Han <br/>
Responsive Demo E-commerce website.<br/>
This website is created under instruction made by <a href="https://www.udemy.com/user/academind/">Academind by Maximillian</a> on Udemy course.
It is a mixture of provided content and my own work.

## Technologies Used
- JavaScript
- HTML
- CSS
- Express
- Mongoose

## Implemented Concepts
- Server-side logic
- MVC framework
- CRUD operation
- Authentication
- Validation
- Authorization
- Session
- Objects
- JSON 
- API (Cloudinary, Stripe, SendGrid)
- Asynchronous function

## Third party technologies
- <a href="https://cloudinary.com/">Cloudinary</a>
  - Cloudinary is a perfect location to store and fetch images for your project.
- <a href="https://stripe.com/en-ca">Stripe</a>
  - Stripe is perfect solution to implement payment system into your project or online business.
- <a href="https://sendgrid.com/">Send Grid</a>
  - Send Grid is perfect way to communicate with users by sending email. 

## Dependencies
- @sendgrid/mail (ver 7.7.0)
- bcryptjs (ver 2.4.3)
- body-parser (ver 1.18.3)
- cloudinary (ver 1.36.4)
- compression (ver 1.7.4)
- connect-flash (ver 0.1.1)
- connect-mongodb-session (ver 3.1.1)
- dotenv (ver 16.0.3)
- ejs (ver 2.6.1)
- express (ver 4.16.3)
- express-session (ver 1.17.3 )
- express-validator (ver 7.0.1)
- helmet (ver 6.1.5)
- mongodb (ver 5.3.0)
- mongoose (ver 7.0.4)
- multer (ver 1.4.5-lts.1)
- mysql2 (ver 1.6.1)
- nodemailer (ver 6.9.1)
- nodemailer-sendgrid-transport (ver 0.2.0)
- pdfkit (ver 0.13.0)
- stripe (ver 12.4.0)

## Instruction
- Type npm install on your terminal.
- Acquire API keys from SengGrid, Stripe, and Cloudinary.
- Create MongoDB atlas account and acquire user id and password.
- All of these information must be saved locally on your .env file.

## Purpose
- This project demonstrates a practice online business website. 
- User can 
  - Sign Up
  - Log In
  - Reset Password  
  - Add product to a market
  - Add product on a cart
  - Place an order
  - Download an invoice
  - Make a payment
  - Delete a registered product from website.
![LoggedIn](https://github.com/inho115/Express-Shop/assets/97544886/0336f54c-509e-4bd1-a4c3-ab206749962a)

- Purpose of this project is to demonstrate my understanding of crucial conecept in web developement and they are:
  - Server-side logic
  - MVC framework
  - CRUD operation
  - Authentication
  - Validation
  - Authorization
  - Session

## Description 
- When a visitor is not logged in, available actions are limited to only viewing existing products.
![LoggedIn](https://github.com/inho115/Express-Shop/assets/97544886/712a6448-d7d4-4791-a4ca-306eb0baa644)

### Log In
- An authentication middleware is applied to most of CRUD operations, and it prevents a malicious user from entering url manually to perform unallowed actions. 
![login](https://github.com/inho115/Express-Shop/assets/97544886/5589a1c3-aec9-4b0c-843f-2ee83aa8807f)

### Sign Up
- Sign up process requires a user to enter email and password.
- Password will be encrypted by bycrpt and user's information is stored to connected MongoDB cluster.
- User will receive an email from test@inhohan.ca with a welcoming message.
- Seng Grid API was implemented to communicate with users but also for sending a reset token.
![signup email](https://github.com/inho115/Express-Shop/assets/97544886/19a8fe60-886c-45c8-b7d9-85b2afbdd993)

### Reset Password 
- If a user click a reset password link, a single line form will be rendered. 
- When form is submitted, a randomized token is created an a user's reset token.
- The user will receive an email generated by Send Grid, which contains token as a paramter.
![Reset password link](https://github.com/inho115/Express-Shop/assets/97544886/734f55a2-448b-44a2-8ff3-fac6c1a09f2f)

### New Password
- Before rendering happens, the server retrieves reset token from a request parameter.
- With the reset token, the server runs a query to find the correct user by matching reset token.
- When the user is found, the server will render another form with user Id and the reset token as hidden input.
- Once user enters new password and submit, the matching user will be updated with the new password and reset token will be erased from the user.
![new password input](https://github.com/inho115/Express-Shop/assets/97544886/f95d020f-e009-4faa-a071-74aa65222d2d)

### Add Product
- To add a product, the user will be asked to input a title, an image file, a price, and a description of the product.
- Initially the image will be stored in the server's `images` folder and deleted after image is uploaded to a cloudinary server.
- Once the upload process is complete, the server will fetch url of the image and store in the database.
![add product page](https://github.com/inho115/Express-Shop/assets/97544886/2ae10712-2929-415c-bef1-cc1416bca313)

### Deleting Product
- On the Admin page, the user can either update or delete product.
- While editing, if a new image is uploaded, the same process that occured on the adding product will be applied.
- For a deletion, the server will request the Cloudinary to delete the file by sending filename as a parameter.
- The server is deleting Cloudinary data first since database holds the name of the file.
- After that the server will find the product with same id in mongoDB database and delete it.

### Adding Product to Cart
- User can add products on either /shop or /products routes.
- Total number of items and names of selected products will be shown on the cart page.
- User can proceed to checkout by clicking `Order Now!` button.
![Added to cart](https://github.com/inho115/Express-Shop/assets/97544886/36979e34-9880-460c-bb34-d53885cb00e5)


### Checkout Page
- Checkout page is powered by Stripe for convenience by for also security purpose.
![stripe checkout](https://github.com/inho115/Express-Shop/assets/97544886/ad29423f-1f3a-4a96-a6b2-bd1aa96b9bb6)

### Order 
- Once a payment is complete and valid, the order is created with a link to invoice.
![order](https://github.com/inho115/Express-Shop/assets/97544886/9e936756-51e5-4947-a010-1cfa7d82ecb6)

### Invoice
- If the user requires to print or view detail of the order, the user can click invoice link.
- This link will redirect user to page that generates PDF version of the order.
![Capture](https://github.com/inho115/Express-Shop/assets/97544886/f6aa1208-49a1-4c18-8deb-c4f48579252c)

## License 
- Copyright (c) 2023 In ho Han
## Thanks to
- <a href="https://www.udemy.com/user/academind/">Academind by Maximillian</a>
  - Youtube Channel owner and instructor at Udemy.
## Contact
- If you have any question related to this project, please contact me with any of these method.
  - bhan951105@gmail.com
  - <a href="https://www.linkedin.com/in/ihhan/">LinkedIn</a>
